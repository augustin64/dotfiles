#!/bin/bash

INT="eDP-1"
EXT="HDMI-2"
# set up the two monitors for bspwm
# NOTE This is a simplistic approach because I already know the settings I
# want to apply.
external_monitor=$(xrandr -q | grep "$EXT")

echo "$external_monitor"
if [[ "$external_monitor" == *"disconnected"* ]]; then
    bspc monitor "$INT" -d 1 2 3 4 5 6 7 8 9 0
    xrandr --output "$INT" --primary --mode 2048x1152 --rotate normal && xrandr --output "$EXT" --off
else
    echo "activating external screen";
    xrandr --output "$INT" --primary --mode 2048x1152 --rotate normal --output "$EXT" --mode 1920x1080 --rotate normal --right-of "$INT"
    bspc monitor "$EXT" -d 6 7 8 9 0
    bspc monitor "$INT" -d 1 2 3 4 5
fi
